## 103.7 Regular Expressions
__weight 3__


## Special Characters: Atoms
- átomos são caracteres únicos que têm significado especial:

### __.__ Dot \(ponto)
- representa qualquer caractere, independente de sua natureza.

### __^__ Caret \(sinal circunflexo)
- sinaliza o início de uma linha.

### __$__ Dollar Sign \(cifrão)
- sinaliza o final de uma linha.


## Special Characters: Brackets
- expressões em colchetes formam um átomo, normalmente constituídos de uma lista:

### __\[]__ Square Brackets \(colchetes)
- delimita uma lista de caracteres que podem ocupar uma mesma posição em um padrão;
	- '\[1b]' delimita um espaço que pode ser ocupado seja por '1' ou 'b';
	- '\[0−9]' ou '\[a-z]' com '-' representando um intervalo de zero a nove ou de 'a' a 'z';
	- '\[:alnum:]' corresponde a um caractere alfanumérico;
	- '\[:alpha:]' corresponde a um caractere alfabético;
	- '\[:ascii:]' caractere ASCII;
	- '\[:blank:]' espaço ou tabulação;
	- '\[:lower:]' ou '\[:upper:]' minúsculo ou maiúsculo;
	- '\[:space:]' espaço, alimentação de formulário \(\f), nova linha \(\n), retorno de carro \(\r), tabulação horizontal \(\t) e tabulação vertical \(\v);
	- '\[:xdigit:]' hexadecimal de '0' a 'f'.

### __\[^]__ Square Brackets \(colchetes)
- representa a negação dos caracteres na lista;
		- '\[^1b]' delimita um espaço que exclui '1' ou 'b'.


## Special Characters: Quantifiers


### __\*__ Asterisk
- representa a ocorrência de um caracter precedido de 0 a n vezes.

### __+__ Plus Sign \(sinal de mais)
- sinaliza que uma ocorrência aparece uma ou mais vezes.

### __?__ Question Mark \(interrogação)
- sinaliza que o caractere imediatamente anterior é opcional.

### __{n}__ Bounds \(chaves)
- sinaliza o número 'n' de vezes que um átomo precedido pode ocorrer;
- '{n,}' sinaliza que o átomo precedido deve ocorrer ao menos 'n' vezes;
- '{n1,n2}' sinaliza que deve ocorrer entre 'n1' e 'n2' vezes.

### __|__ Pipes
- pipes, em expressões regulares, têm o valor de um operador lógico de alternância.


## Commands


### grep *options pattern file*
- localizador de padrões;
- __opções:__
	- '-i' ignora a propriedade case sensitive;
	- '-v' diferente do 'verbose' da maioria dos casos, com 'grep' essa opção
	retorna quaisquer linhas, exceto as que tiverem o padrão de caracteres que segue 
	a opção;
	- '-c' conta e retorna a quantidade de linhas em que um padrão de caracteres
	ocorre no arquivo fornecido;
	- '--color' destaca as ocorrências que o 'grep' encontra; pode-se usar o alias
	'grep='grep --color';
	- '-E' permite estender metacaracteres em expressões regulares;
	- 'egrep' equivale a 'grep -E';
	- 'fgrep' impede expressões regulares.
	
### update-alternatives
- comando relacionado à sessão 103.8, a respeito do editor Vi;
- o comando permite alterar links simbólicos do sistema contidos no diretório 
/etc/alternatives/
- o uso mais comum desse comando é com a sintaxe:
``` $ update-alternatives --config [command] ```

### with 'sed'
``` $ sed [options] '[command]/search/pattern/' [file] ```

__exemples:__

``` # sed 's/nologin$/REGEX FOUND/' /tmp/passwd_copy ```
- a expressão regular acima usa o editor 'sed' para, com o comando 's' \(buscar e substituir), localizar ocorrências de 'nologin' no final de cada linha, 
representado por '$', e substituir por 'REGEX FOUND', no arquivo '/tmp/passwd_copy';

``` # sed -E 's/(false|nologin)$/INVALID SHELL/' /tmp/passwd_copy ```
- a expressão regular acima usa a opção '-E' para permitir um agrupamento de caracteres na posição da referência de busca 'false|nologin' \(em que o pipe '|' representa o operador 'or'), para substituir qualquer ocorrência de 'false' ou 
'nologin' no final de cada linha por 'INVALID SHELL';

``` # sed -E 's/^(root|daemon|www-data)/REGEX/' /tmp/passwd_copy | nl```
- a expressão regular acima substitui o '$' cifrão pelo '^' circunflexo no início do agrupamento de caracteres para sinalizar que qualquer ocorrência de 'root' ou 'daemon' ou 'www-data' no início de uma linha deverá ser substituída por 
'REGEX'; a saída da expressão terá linhas numeradas pelo comando 'nl';

``` # sed -E 's/[M].../REGEX/g' /tmp/passwd_copy ```
- com a expressão acima, tudo que o 'sed' encontrar que se iniciar por 'M' maiúsculo antecedendo três caracteres de qualquer natureza será substituído por 'REGEX'; 
sendo os colchetes a representação de uma lista, podem-se acrescentar quantos elementos forem necessários para coincidir na busca:

``` 's/[Mm].../REGEX/g' ``` seriam buscadas sequências de caracteres que tivessem  'M' maiúsculo ou 'm' minúsculo na primeira posição; 

``` 's/^[a-f]../REGEX/g' ``` seriam buscadas sequências de caracteres que se iniciassem por qualquer letra entre 'a' e 'f' minúsculos no começo de cada linha, seguidas de mais dois caracteres quaisquer;

``` 's/^[^a-f]../REGEX/g' ``` como o circunflexo dentro dos colchetes representa a negação do conteúdo da lista, nesse caso seriam substitídas as sequências de até 3 caracteres no início de cada linha que NÃO se iniciassem por qualquer letra minúscula entre 'a' e 'f'.

### with 'grep'
``` $ grep [options] 'search pattern' [file] ```

__exemples:__

``` $ grep -E '(root){3}' /tmp/passwd_copy ```
- retorna as linhas em que a sequência de caracteres 'root' ocorre exatamente três vezes aglutinadas;

``` '(root){3,}' ```
- retorna ocorrências aglutinadas três ou mais vezes;

``` 'o{2}t' ```
- retorna ocorrências aglutinadas duas vezes de 'o' seguidas de 't' \(oot);

