## 107.2 Scheduling Tasks
__weight 4__


### CRON
- daemon que verifica, a cada minuto, tabelas de tarefas a executar, chamadas '__crontabs__', contendo '__cron jobs__';
- normalmente o modelo dos crontabs é o arquivo '/etc/crontab';

- __Crontabs de Usuário:__
	- geralmente encontrados em '/var/spool/cron/';
	- contém 6 campos separados por espaço:
		- minuto da hora: 0-59;
		- hora do dia: 0-23;
		- dia do mês: 1-31;
		- mês do ano: 1-12;
		- dia da semana: 0-7, podendo o domingo ser 0 ou 7;
		- comando a executar;
	- o preenchimento dos campos aceita asterisco '*' como sinal de qualquer valor, vírgula ',' separando valores possíveis, hífen '-' especificando um intervalo e barra '/' para valores escalonados;

- __Crontabs de Sistema:__
	- '/etc/crontab' e os arquivos em '/etc/cron.d' são crontabs de sistema e só podem ser alterados pelo root;
	- algumas distros possuem também os diretórios: '/etc/cron.hourly', '/etc/cron.daily', '/etc/cron.weekly' e '/etc/cron.monthly', em que podem ser colocados crontabs para serem executados na frequência equivalente; estes mesmos diretórios também podem ter o nome '/etc/cron.d/hourly' etc.;
	- contém 7 campos separados por espaço, porque especifica o nome do usuário cuja conta irá executar o comando:
		- minuto da hora: 0-59;
		- hora do dia: 0-23;
		- dia do mês: 1-31;
		- mês do ano: 1-12;
		- dia da semana: 0-7, podendo o domingo ser 0 ou 7;
		- nome do usuário cuja conta irá executar o comando;
		- comando a executar;

- __especificações de tempo:__
	- podem substituir as cinco primeiras colunas no crontab:
		- @reboot: roda a tarefa uma vez após a reinicialização;
		- @hourly: a cada hora;
		- @daily ou @midnight: a cada 00:00h;
		- @monthly: a cada 00:00h do primeiro dia de cada mês;
		- @yearly: a cada 00:00h do primeiro dia de cada ano;

- __variáveis no crontab:__
	- HOME: diretório inicial do usuário em que o cron invoca os comandos;
	- MAILTO: nome de usuário ou endereço para o qual são enviadas as saídas de erro padrão; podem-se configurar diversos valores separados por vírgula;
	- PATH: caminho em que os comandos são encontrados;
	- SHELL: shell a ser usado;

- __controle de uso:__
	- os arquivos '/etc/cron.allow' e '/etc/cron.deny' listam usuários que têm permissão ou não para agendar tarefas.

### crontab
- comando usado administrar arquivos crontab de usuário;
- crontabs de sistema são administrado diretamente nos diretórios respectivos, conforme acima;
- __opções:__
	- '-e' cria ou edita um arquivo crontab usando um editor selecionado no primeiro uso ou configurado em variáveis de ambiente feito VISUAL ou EDITOR;
	- '-l' exibe o crontab atual;
	- '-r' remove o crontab atual;
	- '-u' permite especificar um usuário cujo crontab será modificado.	