## 104.1 Partitions


### fdisk
- utilitário padrão para gerenciar partições MBR - Master Boot Record;
- para editar uma tabela de partição no disco 'sda':
```# fdisk /dev/sda```
- __opções importantes:__
	- '-l' lista os discos ou partições em um disco fornecido;
	- 'm' menu de ajuda com as opções de interação do fdisk;
	- 'p' detalha informações a respeito do disco selecionado;
	- 'n' cria uma nova partição;
	- 'f' exibe o espaço ainda não alocado;
	- 'd' remove uma partição;
	- 't' seguido pelo número de uma partição permite alterar seu tipo; os tipos são identificados por códigos hexadecimais:
		- '83' para partições Linux;
		- '82' para partições Swap;
		- '8e' para partições Linux LVM;
		- '5' para partições estendidas;
		- para ver mais tipos de partições, usar a opção 'l';
	- 'q' sai do utilitário sem escrever nada em disco;
	- 'w' escreve as alterações em disco.

### gdisk
- utilitário para gerenciar partições GUID - GPT;
- para editar uma tabela de partição no disco 'sda':
```# gdisk /dev/sda```
- __opções importantes:__
	- '?' ou 'h' para o menu de ajuda;
	- 'p' detalha informações a respeito do disco selecionado;
	- 'o' cria uma nova tabela de partições GUID - GPT;
	- 'n' cria uma nova partição;
	- 'l' exibe os tipos de partições suportados;
	- 'd' remove uma partição;
	- 't' seguido pelo número de uma partição permite alterar seu tipo; os tipos são identificados por códigos hexadecimais:
		- '8300' para partições Linux;
		- '8200' para partições Swap;
		- '8e' para partições Linux LVM;
		- para ver mais tipos de partições, usar a opção 'L';
	- 'q' sai do utilitário sem escrever nada em disco;
	- 'w' escreve as alterações em disco.

### parted
- editor de partições para MBR e GPT;
- para editar uma tabela de partição no disco 'sda':
```# parted /dev/sda```
- para mudar o disco selecionado:
```# select /dev/sdb```
- __comandos:__
	- 'print' exibe as partições existentes no disco selecionado;
	- 'print devices' lista todos os dispositivos de bloco conectados ao sistema;
	- 'print all' exibe mas informações sobre os dispositivos;
	- 'print free' exibe o espaço livre nos dispositivos;
	- 'mklabel' cria uma tabela de partições, seguido do tipo:
		- 'mklabel msdos' para MBR;
		- 'mklabel gpt' para GPT;
	- 'mkpart' cria uma partição, seguindo a sintaxe: 'mkpart PARTTYPE FSTYPE START END', em que:
		- PARTTYPE é o tipo, que pode ser 'primary', 'logical' ou 'extended', no caso MBR;
		- FSTYPE é o rótulo do sistema de arquivos - 'file system';
		- START é o ponto onde a partição se inicia, que pode ser dado como:
			- '2s' para o segundo setor,
			- '1m' para o primeiro megabyte,
			- '1024B' para a quantidade em bytes ou
			- '0%' para o percentual de disco;
		- END especifica o ponto onde a partição termina, usando as mesmas unidades de START;
	- 'rm' remove a partição cujo número for fornecido a seguir;
	- 'rescue START END' recupera uma partição acidentalmente removida, informando os pontos aproximados de início e fim;
	- 'resizepart PARTNUMBER NEWEND' redimensiona uma partição desmontada e com espaço livre após seu final;
		- uma vez redimensionada, a partição precisa ter seu sistema de arquivos ampliado com o utilitário 'resize2fs':
			```$ sudo resize2fs /dev/sdb3```
		- o procedimento inverso, com resize2fs e resizepart reduz uma partição;
			```# resize2fs /dev/sdb3 90m
			# parted /dev/sdb3
			resizepart 3 300m```
	- 'quit' para sair do utilitário.